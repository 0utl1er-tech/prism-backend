syntax = "proto3";

package customer.v1;

import "contact/v1/contact.proto";
import "google/api/annotations.proto";

option go_package = "github.com/0utl1er-tech/prism-backend/gen/pb/customer/v1;customerv1";

service CustomerService {
  rpc CreateCustomer(CreateCustomerRequest) returns (CreateCustomerResponse) {
    option (google.api.http) = {
      post: "/v1/customers"
      body: "*"
    };
  }
  rpc GetCustomer(GetCustomerRequest) returns (GetCustomerResponse) {
    option (google.api.http) = {get: "/v1/customers/{id}"};
  }
  rpc GetCustomerByBookId(GetCustomerByBookIdRequest) returns (GetCustomerByBookIdResponse) {
    option (google.api.http) = {
      post: "/v1/customers/book"
      body: "*"
    };
  }

  rpc SearchCustomer(SearchCustomerRequest) returns (SearchCustomerResponse) {
    option (google.api.http) = {
      post: "/v1/customers/search"
      body: "*"
    };
  }
}

message CreateCustomerRequest {
  string book_id = 1;
  string name = 2;
  string phone = 3;
  optional string corporation = 4;
  optional string address = 5;
  optional string memo = 6;
  optional string leader = 7;
  optional string leader_sex = 8;
  optional string pic = 9;
  optional string pic_sex = 10;
  optional contact.v1.Contact contact = 11;
}

message CreateCustomerResponse {
  string id = 1;
  string book_id = 2;
  string name = 3;
  string corporation = 4;
  string address = 5;
  string memo = 6;
}

message SearchCustomerRequest {
  string book_id = 1;
  optional string name = 2;
  optional string corporation = 3;
  optional string address = 4;
  optional string phone = 5;
  optional string memo = 7;
  optional contact.v1.Contact contact = 8;
}

message SearchCustomerResponse {
  repeated Customer customers = 1;
}

message GetCustomerRequest {
  string id = 1;
}

message GetCustomerResponse {
  string id = 1;
  string name = 2;
  string job = 3;
  string corporation = 4;
  string address = 5;
  string phone = 6;
  string leader = 7;
  string leader_sex = 8;
  string pic = 9;
  string pic_sex = 10;
  string memo = 11;
  string mail = 12;
  string fax = 13;
  contact.v1.Contact contact = 14;
}

message Customer {
  string id = 1;
  string name = 2;
  string job = 3;
  string corporation = 4;
  string address = 5;
  string phone = 6;
  string leader = 7;
  string leader_sex = 8;
  string pic = 9;
  string pic_sex = 10;
  string memo = 11;
}

message GetCustomerByBookIdRequest {
  string book_id = 1;
  int32 page = 2;
  int32 limit = 3;
}

message GetCustomerByBookIdResponse {
  repeated Customer customers = 1;
  int32 total = 2;
  int32 page = 3;
  int32 limit = 4;
}
